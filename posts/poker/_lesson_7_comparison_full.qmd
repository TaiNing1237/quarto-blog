---
title: "Poker Lesson 7 - 比大小遊戲 (完整版)"
author: "Tai-Ning Liao"
date: "2025-12-23"
categories: [Poker]
format:
    html:
        fig-align: center # 這會讓所有圖片都置中
        fig-cap-location: bottom # 確保圖標在圖片下方
        fig-cap-align: center # 這是控制圖標置中的關鍵
---

今天我們繼續比大小遊戲，但是上次假設，若先手 Player A check，則強制攤牌。這次我們來討論更一般的情況: Player B 可以選擇主動下注。

不過我們還是先忽略可以加注 (raise) 的情況。

### 遊戲規則

* **玩家**：Player A 與 Player B。
* **底池 (Pot)**：$P$ 元（可視為雙方起始強迫下注 $P/2$）。
* **發牌**：從一副撲克牌中，雙方各發一張牌，彼此皆看不到對方的牌（資訊對稱且隱蔽）。
* **攤牌時勝負判定**：
    * 數字較大者獲勝，贏走底池。
    * 若數字相同則平手，雙方拿回各自的下注。
* **下注流程**：
    * 設定每次下注金額為 $B$ 元。
    * Player A（先手）：可以選擇 **下注 (Bet)** 或 **過牌 (Check)**。
    * 若 Player A 選擇 **過牌 (Check)**，則輪到 Player B 行動，B 同樣可以選擇 **下注** 或 **過牌**。
    * 若 Player A 選擇 **下注 (Bet)**，則輪到 Player B 行動，B 可以選擇 **跟注 (Call)** 或 **棄牌 (Fold)**。


```{dot}
//| label: fig-full-game-tree
//| fig-cap: "Full Game Tree: Player B can Bet after A Checks"

digraph GT_Advanced {
  // --- 版面設定 ---
  rankdir=LR; 
  node [fontname="Helvetica, Arial, sans-serif"];
  edge [fontname="Helvetica, Arial, sans-serif", fontsize=11];

  // --- 決策節點 (Player Nodes) ---
  node [shape=circle, style=filled, fillcolor="white", penwidth=2, margin=0.1];
  
  // A1: 起始點
  A1 [label="Player A", color="#1565C0"];
  
  // B1: 面對 A 下注時
  B1 [label="Player B", color="#1565C0"];
  
  // B2: 面對 A 過牌時 (這是新增的節點)
  B2 [label="Player B", color="#1565C0"];
  
  // A2: 面對 A Check, B Bet 時 (A 必須回應)
  A2 [label="Player A", color="#1565C0"];

  // --- 結局節點 (Terminal Nodes) ---
  node [shape=box, style="filled,rounded", fillcolor="#F5F5F5", color="black", penwidth=1, margin=0.15];

  // A Bet 的後續結局
  Outcome_A_Bet_B_Call [label="結局: 攤牌\n(池底: P+2B)"];
  Outcome_A_Bet_B_Fold [label="結局: A 獲勝\n(B 棄牌)"];

  // A Check -> B Check 的結局
  Outcome_Check_Check [label=<
    <TABLE BORDER="0" CELLBORDER="0" CELLSPACING="0" CELLPADDING="2">
    <TR><TD><B>結局: 攤牌 (Check-Back)</B></TD></TR>
    <TR><TD>池底: P</TD></TR>
    </TABLE>
  >];

  // A Check -> B Bet 的後續結局
  Outcome_Check_Bet_Call [label="結局: 攤牌\n(池底: P+2B)"];
  Outcome_Check_Bet_Fold [label="結局: B 獲勝\n(A 棄牌)"];

  // --- 路徑連結 ---

  // 1. A 選擇 下注 (Bet) 的分支 (舊有路徑)
  A1 -> B1 [label=" 下注 (Bet) "];
  B1 -> Outcome_A_Bet_B_Call [label=" 跟注 (Call) "];
  B1 -> Outcome_A_Bet_B_Fold [label=" 棄牌 (Fold) "];

  // 2. A 選擇 過牌 (Check) 的分支 (大幅修改路徑)
  // 這裡不再直接結束，而是輪到 B2
  A1 -> B2 [label=" 過牌 (Check) "];

  // 3. B2 的選擇
  // B 隨後過牌 -> 遊戲結束，底池只有 P
  B2 -> Outcome_Check_Check [label=" 過牌 (Check) "];
  // B 選擇下注 -> 輪回 A (A2)
  B2 -> A2 [label=" 下注 (Bet) "];

  // 4. A2 (面對偷底) 的選擇
  A2 -> Outcome_Check_Bet_Call [label=" 跟注 (Call) "];
  A2 -> Outcome_Check_Bet_Fold [label=" 棄牌 (Fold) "];
}
```







